"use strict";function getSurvey(e){$.ajax({url:e,type:"GET",async:!1,cache:!1,timeout:3e4,error:function(){return{}},success:function(e){return console.log(e),e}})}function sendSurvey(e){}function loggedIn(){return document.cookie.indexOf("user")>-1}var Footer=React.createClass({displayName:"Footer",render:function(){return 0==this.props.questionNum?React.createElement("div",{className:"mdl-grid mdl-card__title mdl-card--expand mdl-300"},React.createElement("button",{className:"mdl-cell mdl-cell--4-col mdl-button mdl-js-button mdl-button--raised",disabled:!0},"Previous"),React.createElement(Progress,{questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}),React.createElement(NextButton,{nextHandler:this.props.nextHandler,surveyData:this.props.surveyData,questionID:this.props.questionID,response_format:this.props.response_format})):this.props.questionNum==this.props.numQuestions-1?React.createElement("div",{className:"mdl-grid mdl-card__title mdl-card--expand mdl-300"},React.createElement(PrevButton,{prevHandler:this.props.prevHandler,surveyData:this.props.surveyData,questionID:this.props.questionID,response_format:this.props.response_format}),React.createElement(Progress,{questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}),React.createElement(SubmitButton,{onSubmit:this.props.onSubmit,surveyData:this.props.surveyData,questionID:this.props.questionID,response_format:this.props.response_format})):React.createElement("div",{className:"mdl-grid mdl-card__title mdl-card--expand mdl-300"},React.createElement(PrevButton,{prevHandler:this.props.prevHandler,surveyData:this.props.surveyData,questionID:this.props.questionID,response_format:this.props.response_format}),React.createElement(Progress,{questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}),React.createElement(NextButton,{nextHandler:this.props.nextHandler,surveyData:this.props.surveyData,questionID:this.props.questionID,response_format:this.props.response_format}))}}),Progress=React.createClass({displayName:"Progress",render:function(){var e=this.props.responseSize/(this.props.numQuestions-1)*100;return React.createElement("progress",{id:"myProgress",className:"mdl-cell mdl-cell--4-col bar",value:e,max:"100"})}}),PrevButton=React.createClass({displayName:"PrevButton",clickHandler:function(){var e=this.props.surveyData,t=this.props.questionID,s=this.props.response_format;this.props.prevHandler(e,t,s)},render:function(){return React.createElement("button",{onClick:this.clickHandler,className:"mdl-cell mdl-cell--4-col mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"},"Previous")}}),NextButton=React.createClass({displayName:"NextButton",clickHandler:function(){var e=this.props.surveyData,t=this.props.questionID,s=this.props.response_format;this.props.nextHandler(e,t,s)},render:function(){return React.createElement("button",{onClick:this.clickHandler,className:"mdl-cell mdl-cell--4-col mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"},"Next")}}),SubmitButton=React.createClass({displayName:"SubmitButton",clickHandler:function(){var e=this.props.surveyData,t=this.props.questionID,s=this.props.response_format;this.props.onSubmit(e,t,s)},render:function(){return React.createElement("button",{onClick:this.clickHandler,className:"mdl-cell mdl-cell--4-col mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-color--purple"},"Submit")}}),MultipleChoice=React.createClass({displayName:"MultipleChoice",getInitialState:function(){for(var e=Object.keys(this.props.options).length,t=[],s=0;e>s;s++)t[s]=!1;return{data:t}},handleChange:function(e,t){var s=null;s=0==t?!0:!1;var r=this.state.data;r[e]=s,this.setState({data:r})},render:function(){var e=this,t=this.props.options.map(function(t,s){return React.createElement("label",{className:"mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect"},React.createElement("input",{type:"checkbox",value:e.state.data[s],name:t,key:s,className:"mdl-checkbox__input",onChange:e.handleChange.bind(e,s,e.state.data[s])}),React.createElement("span",{className:"mdl-checkbox__label"}," ",t," "))});return React.createElement("div",{className:"options mdl-card__supporting-text mdl-color-text--grey-600"},t,React.createElement(Footer,{prevHandler:this.props.prevHandler,nextHandler:this.props.nextHandler,onSubmit:this.props.onSubmit,surveyData:this.state.data,questionID:this.props.questionID,response_format:this.props.response_format,questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}))}}),SingleChoice=React.createClass({displayName:"SingleChoice",getInitialState:function(){for(var e=Object.keys(this.props.options).length,t=[],s=0;e>s;s++)t[s]=!1;return{data:t}},handleChange:function(e,t){for(var s=Object.keys(this.props.options).length,r=this.state.data,n=0;s>n;n++)r[n]=!1;r[e]=!0,this.setState({data:r})},render:function(){var e=this,t=String(this.props.surveyID),s=this.props.options.map(function(s,r){return React.createElement("div",null,React.createElement("label",{className:"mdl-radio mdl-js-radio mdl-js-ripple-effect"},React.createElement("input",{type:"radio",className:"mdl-radio__button",name:t,value:r,onChange:e.handleChange.bind(e,r,e.state.data[r])}),React.createElement("span",{className:"mdl-radio__label"}," ",s," ")))});return React.createElement("div",{className:"mdl-card__supporting-text mdl-color-text--grey-600"},s,React.createElement(Footer,{prevHandler:this.props.prevHandler,nextHandler:this.props.nextHandler,onSubmit:this.props.onSubmit,surveyData:this.state.data,questionID:this.props.questionID,response_format:this.props.response_format,questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}))}}),FreeResponse=React.createClass({displayName:"FreeResponse",getInitialState:function(){return{answer:"Change Me"}},handleChange:function(e){this.setState({answer:e.target.value})},render:function(){return React.createElement("div",{className:"mdl-card__supporting-text mdl-color-text--grey-600"},React.createElement("textarea",{className:"mdl-textfield__input",type:"text",rows:"4",id:"test",value:this.state.answer,onChange:this.handleChange}),React.createElement("br",null),React.createElement(Footer,{prevHandler:this.props.prevHandler,nextHandler:this.props.nextHandler,onSubmit:this.props.onSubmit,surveyData:this.state.answer,questionID:this.props.questionID,response_format:this.props.response_format,questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}))}}),Rating=React.createClass({displayName:"Rating",getInitialState:function(){return{answer:5}},handleChange:function(e){this.setState({answer:e.target.value})},render:function(){return React.createElement("div",{className:"mdl-card__supporting-text mdl-color-text--grey-600"},React.createElement("div",null,React.createElement("input",{className:"mdl-slider mdl-js-slider",type:"range",min:"0",max:"10",value:this.state.answer,step:"1",onChange:this.handleChange}),React.createElement("span",{id:"sliderStatus"},this.state.answer)),React.createElement(Footer,{prevHandler:this.props.prevHandler,nextHandler:this.props.nextHandler,onSubmit:this.props.onSubmit,surveyData:this.state.answer,questionID:this.props.questionID,response_format:this.props.response_format,questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}))}}),TitleSection=React.createClass({displayName:"TitleSection",render:function(){return React.createElement("div",{className:"mdl-card__title mdl-card--expand mdl-color--teal-300"},React.createElement("h2",{className:"mdl-card__title-text"}," ",this.props.titleText," "))}}),Card=React.createClass({displayName:"Card",getInitialState:function(){return{response:[]}},componentDidUpdate:function(){componentHandler.upgradeDom()},render:function(){return"multipleChoice"==this.props.response_format?React.createElement("div",{className:"updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop"},React.createElement("div",null,React.createElement(TitleSection,{titleText:this.props.title}),React.createElement(MultipleChoice,{options:this.props.options,onSubmit:this.props.onSubmit,nextHandler:this.props.nextHandler,prevHandler:this.props.prevHandler,surveyID:this.props.surveyID,department:this.props.department,creator:this.props.creator,isInstructor:this.props.isInstructor,questionID:this.props.questionID,response_format:this.props.response_format,questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}))):"rating"==this.props.response_format?React.createElement("div",{className:"updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop"},React.createElement("div",null,React.createElement(TitleSection,{titleText:this.props.title}),React.createElement(Rating,{surveyID:this.props.surveyID,department:this.props.department,creator:this.props.creator,isInstructor:this.props.isInstructor,onSubmit:this.props.onSubmit,nextHandler:this.props.nextHandler,prevHandler:this.props.prevHandler,surveyID:this.props.surveyID,questionID:this.props.questionID,response_format:this.props.response_format,questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}))):"trueOrFalse"==this.props.response_format?React.createElement("div",{className:"updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop"},React.createElement("div",null,React.createElement(TitleSection,{titleText:this.props.title}),React.createElement(SingleChoice,{options:this.props.options,onSubmit:this.props.onSubmit,nextHandler:this.props.nextHandler,prevHandler:this.props.prevHandler,surveyID:this.props.surveyID,department:this.props.department,creator:this.props.creator,isInstructor:this.props.isInstructor,questionID:this.props.questionID,response_format:this.props.response_format,questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}))):"freeResponse"==this.props.response_format?React.createElement("div",{className:"updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop"},React.createElement("div",null,React.createElement(TitleSection,{titleText:this.props.title}),React.createElement(FreeResponse,{onSubmit:this.props.onSubmit,nextHandler:this.props.nextHandler,prevHandler:this.props.prevHandler,surveyID:this.props.surveyID,department:this.props.department,creator:this.props.creator,isInstructor:this.props.isInstructor,questionID:this.props.questionID,response_format:this.props.response_format,questionNum:this.props.questionNum,numQuestions:this.props.numQuestions,responseSize:this.props.responseSize}))):void alert("not Valid card type")}}),Page=React.createClass({displayName:"Page",render:function(){return React.createElement("div",{className:"mdl-grid mdl-cell--12-col content"},React.createElement(MainDiv,{routes:this.props.routes}))}}),MainDiv=React.createClass({displayName:"MainDiv",render:function(){if(!loggedIn())return React.createElement(Welcome,null);routesObject=this.props.routes;var e=data.map(function(e){return React.createElement(SurveyDiv,{key:e.id,questions:e.questions,routes:routesObject,surveyID:e.id,department:e.department,creator:e.creator,isInstructor:e.isInstructor})});return React.createElement("div",{className:"mainDiv "},e,React.createElement(SurveyCreationCard,null))}}),SurveyDiv=React.createClass({displayName:"SurveyDiv",getInitialState:function(){return{length:Object.keys(this.props.questions).length,showCard:!0,iter:0,responseSize:0,response:{survey_id:this.props.surveyID,question_responses:[]}}},handleSurveySubmit:function(e,t,s){for(var r=this.state.response,n={response_format:s,question_id:t,response_data:e},a=Object.keys(r.question_responses).length,o=a-1;o>=0;o--)r.question_responses[o].question_id==t&&r.question_responses.splice(o,1);r.question_responses.push(n),this.setState({response:r}),$.ajax({url:this.props.routes.response,contentType:"application/json",type:"POST",data:JSON.stringify(r),success:function(e){console.log(r),this.removeCard()}.bind(this),error:function(e,t,s){console.log(this.state.response),console.error("/api/response",t,s.toString())}.bind(this)})},removeCard:function(){this.setState({showCard:!1})},nextQuestion:function(e,t,s){for(var r=this.state.response,n={response_format:s,question_id:t,response_data:e},a=Object.keys(r.question_responses).length,o=a-1;o>=0;o--)r.question_responses[o].question_id==t&&r.question_responses.splice(o,1);r.question_responses.push(n),this.setState({response:r}),this.setState({responseSize:Object.keys(this.state.response.question_responses).length});var i=this.state.iter;i==this.state.length-1?this.handleSurveySubmit(this.state.response):this.setState({iter:i+1})},prevQuestion:function(e,t,s){for(var r=this.state.response,n={response_format:s,question_id:t,response_data:e},a=Object.keys(r.question_responses).length,o=a-1;o>=0;o--)r.question_responses[o].question_id==t&&r.question_responses.splice(o,1);r.question_responses.push(n),this.setState({response:r}),this.setState({responseSize:Object.keys(this.state.response.question_responses).length});var i=this.state.iter;this.setState({iter:i-1})},render:function(){return 1==this.state.showCard?React.createElement("div",{className:"surveyDiv"},React.createElement(Card,{routes:this.props.routes,questionNum:this.state.iter,questionID:this.props.questions[this.state.iter].id,responseSize:this.state.responseSize,numQuestions:this.state.length,title:this.props.questions[this.state.iter].title,options:this.props.questions[this.state.iter].options,response_format:this.props.questions[this.state.iter].response_format,surveyID:this.props.surveyID,department:this.props.department,creator:this.props.creator,isInstructor:this.props.isInstructor,removeHandler:this.removeCard,nextHandler:this.nextQuestion,prevHandler:this.prevQuestion,onSubmit:this.handleSurveySubmit})):React.createElement("div",null)}}),Welcome=React.createClass({displayName:"Welcome",render:function(){return React.createElement("div",null,React.createElement(About,null),React.createElement(Login,null))}}),About=React.createClass({displayName:"About",render:function(){return React.createElement("div",{className:"updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--8-col"},React.createElement("p",null,"Campus Consensus is a survey and data collection system developed for improving student-faculty relationships at universities being developed at University Colorado at Boulder. Our platform allows students and faculty to ask questions and offer short surveys to improve instructional quality, align student and faculty interests, and express consensus about campus issues."),React.createElement("p",null,"Students in the same class or department can learn about how other students feel about the quality of the course or what is working and what is not. Similarly, faculty can get fine-grain information about how their instruction is being received by their students."),React.createElement("p",null,"Our data will be available to the entire campus in an anonymous form. The project is being developed by computer science seniors at University of Colorado Boulder."),React.createElement("p",null,"Please contact our project leads with any questions:"),React.createElement("ul",null,React.createElement("li",null,"antsankov [at] gmail [dot] com"),React.createElement("li",null,"michael [dot] skirpan [at] colorado [dot] edu")))}}),Login=React.createClass({displayName:"Login",render:function(){return React.createElement("div",{className:"updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col"},React.createElement("form",{action:"/register/culdap",method:"post"},React.createElement("label",null,"CU Login Name"),React.createElement("input",{type:"text",name:"username",required:!0}),React.createElement("label",null,"Password"),React.createElement("input",{type:"password",name:"password",required:!0}),React.createElement("input",{type:"submit",id:"loginbtn",name:"login",value:"Log In","class":"button"})))}}),SurveyCreationCard=React.createClass({displayName:"SurveyCreationCard",render:function(){return React.createElement("div",{className:"updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--8-col-tablet mdl-cell--12-col-desktop"},React.createElement("div",null,React.createElement(TitleSection,{titleText:"Create a Survey"}),React.createElement(Fields,null)))}}),Fields=React.createClass({displayName:"Fields",getInitialState:function(){return{value:"select"}},changeHandler:function(e){this.setState({value:e.target.value})},render:function(){return React.createElement("div",{className:"mdl-card__supporting-text mdl-color-text--grey-600"},React.createElement("h4",null,"Add a Question:"),React.createElement("form",null,React.createElement("p",null,"Title:",React.createElement("input",{type:"text",name:"title_question"})),React.createElement("p",null,"Type:",React.createElement("select",{id:"mySelect",onChange:this.changeHandler,value:this.state.value},React.createElement("option",{disabled:!0,value:"select"}," Select an option "),React.createElement("option",{value:"multipleChoice"},"Multiple Choice"),React.createElement("option",{value:"singleChoice"},"Single Choice"),React.createElement("option",{value:"rating"},"Rating"),React.createElement("option",{value:"freeResponse"},"Open Response")))),React.createElement(Question,{value:this.state.value}))}}),Question=React.createClass({displayName:"Question",componentDidUpdate:function(){componentHandler.upgradeDom()},changeHandler:function(e){this.setState({value:e.target.value})},render:function(){return"multipleChoice"==this.props.value?React.createElement("div",null,React.createElement("ul",{className:"mdl-list"},options),React.createElement("ul",{className:"no_bullets mdl-list"},React.createElement("li",{className:"mdl-list__item"},React.createElement("p",null,React.createElement("button",{className:"mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab"},React.createElement("i",{className:"material-icons"},"add")),"    ADD QUESTION")))):"singleChoice"==this.props.value?React.createElement("input",{type:"text",value:this.props.value,onChange:this.changeHandler}):"rating"==this.props.value?React.createElement("input",{type:"text",value:this.props.value,onChange:this.changeHandler}):"freeResponse"==this.props.value?React.createElement("input",{type:"text",value:this.props.value,onChange:this.changeHandler}):React.createElement("p",{onChange:this.changeHandler})}});